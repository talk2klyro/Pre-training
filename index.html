<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Madarasatun Nisa SaaS Flow (Mermaid.js)</title>
<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });
</script>
</head>
<body>
<h1>Madarasatun Nisa SaaS Flow</h1>

<div class="mermaid">
graph TD
    %% Frontend Pages
    A[Dashboard] --> B[Add Students]
    B --> C[Attendance]
    C --> D[Support]

    %% Backend APIs
    B --> E[/api/students/]
    C --> F[/api/attendance/]
    C --> G[/api/export/]
    D --> H[/api/create-checkout-session/]

    %% Notion / Database
    E --> I[Notion / Database]
    F --> I
    G --> I
    H --> I

    %% Donations Flow
    D --> J[Donation Tiers & Reward System]
    J --> I

    %% Multi-client Config
    K[config.js] --> A
    K --> B
    K --> C
    K --> D

    %% Styling & Helpers
    L[style.css & main.js] --> A
    L --> B
    L --> C
    L --> D
</div>

<script>
  // Optional: add clickable links for nodes
  mermaid.mermaidAPI.render('theGraph', document.querySelector('.mermaid').innerHTML, (svgCode) => {
      document.querySelector('.mermaid').innerHTML = svgCode;

      // Add click handlers
      document.querySelectorAll('text').forEach(node => {
          const txt = node.textContent.trim();
          if(txt === 'Dashboard') node.parentNode.addEventListener('click', ()=> window.open('index.html', '_blank'));
          if(txt === 'Add Students') node.parentNode.addEventListener('click', ()=> window.open('add-student.html', '_blank'));
          if(txt === 'Attendance') node.parentNode.addEventListener('click', ()=> window.open('attendance.html', '_blank'));
          if(txt === 'Support') node.parentNode.addEventListener('click', ()=> window.open('support.html', '_blank'));
      });
  });
</script>

<p>Click nodes to navigate to real pages. Backend/API nodes are for reference.</p>
</body>
</html>
